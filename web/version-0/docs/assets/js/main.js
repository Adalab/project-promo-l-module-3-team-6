"use strict";let inputsTextConfig=[{inputClass:".js-input-name",previewClass:".js-preview-name",defaultValue:"Tree Huggers",prevewPrefix:"",previewElementAttribute:"innerHTML"},{inputClass:".js-input-job",previewClass:".js-preview-job",defaultValue:"Front-end developers",prevewPrefix:"",previewElementAttribute:"innerHTML"},{inputClass:".js-input-email",previewClass:".js-preview-email",defaultValue:"",previewPrefix:"mailto:",previewElementAttribute:"href"},{inputClass:".js-input-phone",previewClass:".js-preview-phone",defaultValue:"",previewPrefix:"tel:",previewElementAttribute:"href"},{inputClass:".js-input-linkedin",previewClass:".js-preview-linkedin",defaultValue:"",previewPrefix:"https://www.linkedin.com/in/",previewElementAttribute:"href"},{inputClass:".js-input-github",previewClass:".js-preview-github",defaultValue:"",previewPrefix:"https://www.github.com/",previewElementAttribute:"href"}];function updateAllInputs(){for(const e of inputsTextConfig){const t=document.querySelector(e.inputClass),r=document.querySelector(e.previewClass);document.querySelector(e.previewElementAttribute);let o=t.value;"innerHTML"===e.previewElementAttribute?(o=""===t.value?e.defaultValue:t.value,r.innerHTML=o):"href"===e.previewElementAttribute&&(""===t.value?o="#":(o=o.replace(e.previewPrefix,""),o=e.previewPrefix+o),r.href=o)}saveInLocalStorage(),showGithub(),showLinkedin(),showPhone(),showEmail()}const inputTextElements=document.querySelectorAll(".js-input-text");for(const e of inputTextElements)e.addEventListener("keyup",updateAllInputs);const phoneIcon=document.querySelector(".js-phone"),emailIcon=document.querySelector(".js-email"),linkedinIcon=document.querySelector(".js-linkedin"),githubIcon=document.querySelector(".js-github"),phoneInput=document.querySelector(".js-input-phone"),emailInput=document.querySelector(".js-input-email"),linkedinInput=document.querySelector(".js-input-linkedin"),githubInput=document.querySelector(".js-input-github"),showPhone=()=>0!==phoneInput.value.length?phoneIcon.classList.remove("pale_icon"):phoneIcon.classList.add("pale_icon");phoneInput.addEventListener("keyup",showPhone);const showEmail=()=>0!==emailInput.value.length?emailIcon.classList.remove("pale_icon"):emailIcon.classList.add("pale_icon");emailInput.addEventListener("keyup",showEmail);const showLinkedin=()=>0!==linkedinInput.value.length?linkedinIcon.classList.remove("pale_icon"):linkedinIcon.classList.add("pale_icon");linkedinInput.addEventListener("keyup",showLinkedin);const showGithub=()=>0!==githubInput.value.length?githubIcon.classList.remove("pale_icon"):githubIcon.classList.add("pale_icon");githubInput.addEventListener("keyup",showGithub),showGithub(),showLinkedin(),showPhone(),showEmail();const collapsableHeaders=document.querySelectorAll(".js-collapsable-header");for(const e of collapsableHeaders)e.addEventListener("click",switchCollapsable);function switchCollapsable(e){const t=e.currentTarget.parentNode,r=document.querySelectorAll(".js-collapsable-container");for(const e of r)t===e?e.classList.toggle("collapsable--close"):e.classList.add("collapsable--close")}const cardElement=document.querySelector(".js-card"),paletteElements=document.querySelectorAll(".js-palette"),cardPreviewText=document.querySelector(".card__preview--text"),borderIcons=document.querySelectorAll(".js-border-palette1-color3"),linkIcons=document.querySelectorAll(".js-icon-palette1-color2");let checkedPalette=1;function handlePalette(e){const t=document.querySelector(".js-palette:checked");if(checkedPalette=t.value,cardElement.classList.add("palette"+checkedPalette),"1"===checkedPalette){cardPreviewText.classList.remove("js-palette2","js-palette3"),cardPreviewText.classList.add("js-palette1");for(const e of borderIcons)e.classList.remove("js-border-palette2-color3","js-border-palette3-color3"),e.classList.add("js-border-palette1-color3");for(const e of linkIcons)e.classList.remove("js-icon-palette3-color2","js-icon-palette2-color2"),e.classList.add("js-icon-palette1-color2")}else if("2"===checkedPalette){cardPreviewText.classList.remove("js-palette1","js-palette3"),cardPreviewText.classList.add("js-palette2");for(const e of borderIcons)e.classList.remove("js-border-palette3-color3","js-border-palette1-color3"),e.classList.add("js-border-palette2-color3");for(const e of linkIcons)e.classList.remove("js-icon-palette3-color2","js-icon-palette1-color2"),e.classList.add("js-icon-palette2-color2")}else if("3"===checkedPalette){cardPreviewText.classList.remove("js-palette1","js-palette2"),cardPreviewText.classList.add("js-palette3");for(const e of borderIcons)e.classList.remove("js-border-palette1-color3","js-border-palette2-color3"),e.classList.add("js-border-palette3-color3");for(const e of linkIcons)e.classList.remove("js-icon-palette1-color2","js-icon-palette2-color2"),e.classList.add("js-icon-palette3-color2")}saveInLocalStorage()}for(const e of paletteElements)e.addEventListener("change",handlePalette);const fr=new FileReader,uploadBtn=document.querySelector(".js__profile-trigger"),fileField=document.querySelector(".js__profile-upload-btn"),profileImage=document.querySelector(".js__profile-image"),profilePreview=document.querySelector(".js__profile-preview");let photo="";function getImage(e){const t=e.currentTarget.files[0];fr.addEventListener("load",writeImage),fr.readAsDataURL(t)}function writeImage(){photo=fr.result,updatePhoto(),saveInLocalStorage()}function updatePhoto(){const e=photo||"./assets/images/animals.gif";profilePreview.style.backgroundImage=`url(${e})`,profileImage.style.backgroundImage=`url(${e})`}function fakeFileClick(){fileField.click()}function getUserData(){return{photo:photo,palette:document.querySelector(".js-palette:checked").value,name:document.querySelector(".js-input-name").value,job:document.querySelector(".js-input-job").value,email:document.querySelector(".js-input-email").value,phone:document.querySelector(".js-input-phone").value,linkedin:document.querySelector(".js-input-linkedin").value,github:document.querySelector(".js-input-github").value}}function saveInLocalStorage(){const e=getUserData(),t=JSON.stringify(e);localStorage.setItem("userData",t)}function getFromLocalStorage(){const e=localStorage.getItem("userData");if(null!==e){const t=JSON.parse(e);document.querySelector(".js-input-name").value=t.name,document.querySelector(".js-input-job").value=t.job,document.querySelector(".js-input-email").value=t.email,document.querySelector(".js-input-phone").value=t.phone,document.querySelector(".js-input-linkedin").value=t.linkedin,document.querySelector(".js-input-github").value=t.github,photo=t.photo;const r=document.querySelectorAll(".js-palette");for(const e of r)e.value===t.palette&&(e.checked=!0);updateAllInputs(),handlePalette(),updatePhoto()}}uploadBtn.addEventListener("click",fakeFileClick),fileField.addEventListener("change",getImage);const resetButton=document.querySelector(".js-reset"),previewName=document.querySelector(".js-preview-name"),previewJob=document.querySelector(".js-preview-job"),previewEmail=document.querySelector(".js-preview-email"),previewPhone=document.querySelector(".js-preview-phone"),previewLinkedin=document.querySelector(".js-preview-linkedin"),previewGithub=document.querySelector(".js-preview-github"),cardImage=document.querySelector(".js__profile-image"),previewImage=document.querySelector(".js__profile-preview"),form=document.querySelectorAll(".js-form");function reset(e){for(let e=0;e<form.length;e++)form[e].value="";previewName.innerHTML="Tree Huggers",previewJob.innerHTML="Front-end developers",previewEmail.removeAttribute("href"),previewPhone.removeAttribute("href"),previewLinkedin.removeAttribute("href"),previewGithub.removeAttribute("href"),cardImage.style.backgroundImage="url(./assets/images/animals.gif)",previewImage.style.backgroundImage="",resetLocalStorage(),clearShare(),showGithub(),showLinkedin(),showPhone(),showEmail()}function resetLocalStorage(e){localStorage.clear("js-palette"),localStorage.clear("js-preview-name"),localStorage.clear("js-preview-job"),localStorage.clear("image"),localStorage.clear("phone"),localStorage.clear("email"),localStorage.clear("linkedin"),localStorage.clear("github")}function clearShare(){createBtn.disabled=!1,shareHidden.classList.add("js-share-hidden"),twitterHiddenElement.classList.add("hidden-share"),createBtn.classList.remove("js-create-hidden")}resetButton.addEventListener("click",reset);const formElement=document.querySelector(".js-submit");function handleSubmit(e){e.preventDefault()}formElement.addEventListener("submit",handleSubmit);const createBtn=document.querySelector(".js-create-btn"),cardResult=document.querySelector(".js-card-link"),shareHidden=document.querySelector(".js-share-hidden"),formSubmit=document.querySelector(".js-submit"),twitterHiddenElement=document.querySelector(".js-twitter-share");let shareLink="";function handleCreateBtn(e){e.preventDefault(),fetchAPI(),shareHidden.classList.remove("js-share-hidden"),createBtn.classList.add("js-create-hidden"),createBtn.disabled=!0,twitterHiddenElement.classList.remove("hidden-share")}function fetchAPI(){const e=getUserData();fetch("https://profileawesome.herokuapp.com/card",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{if(!0===e.success){e.cardURL,shareLink=e.cardURL;document.querySelector(".js-card-link").innerHTML=`<a href="${shareLink}" class="share__result--link js-card-link" target="_blank">${shareLink}</a>;`}else cardResult.innerHTML="Debes cumplimentar todos los campos para poder crear tu enlace"})}createBtn.addEventListener("click",handleCreateBtn),formSubmit.addEventListener("submit",handleCreateBtn);const twitterElement=document.querySelector(".js-twitter-btn"),twitterLinkElement=document.querySelector(".js-twitter-link");function handleTwitterShare(){twitterLinkElement.href="https://twitter.com/intent/tweet?ref_src=twsrc%5Etfw&url="+shareLink}twitterElement.addEventListener("click",handleTwitterShare),getFromLocalStorage(),updateAllInputs(),handlePalette(),updatePhoto();